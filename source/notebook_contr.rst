Машинное обучение для контроля за ноутбуком
===========================================
В журнале Linux Format (LXF238) прочитал статью о машинном обучении с использованием Google TensorFlow. Кратко - это библиотека для создания нейросети, в статье говорилось об уже готовой сети, предназначенной для распознавания картинок, приведен пример - распознование цветов (тюльпан, роза и т.д.). Все предполагалось установить на raspberry Pi, и использовать уже готовую сеть, отрезав верхний уровень и переобучив на своем наборе данных (пример цветы и рыбы). Я захотел освоить такую технологию, тем более что сейчас есть время, но какую выбрать идею?

Я решил завести учет времени, которое семья проводит за компьюером.

Постановка задачи
-----------------
За компьютером (у меня ноут hp с видеокамерой) могут сидеть: я, жена, ребенок. Так же он может быть просто включен, например для просмотра фильма (на телевизоре) или воспроизведения музыки. Программа должна используя видеокамеру понимать кто сидит за компьютером (может быть что и ни кто) и записывать в БД. Потом по этой БД можно будет строит отчеты. 

Требования к БД
***************
БД - sqllite, формат записи: 

        2019-01-10 12:23:00; Andrey
        2019-01-10 12:24:00; Alexey
        2019-01-10 12:25:00; Natasha
        2019-01-10 12:26:00; None

Запись должна проводится 1 раз в минуту. Тут затруднений не предвидится, переполнение БД маловероятно, но обращу внимание.

Требования к распознованию
**************************
Необходимо уверенно распозновать:
        1. 3-х человек: я, жена, сын;
        2. когда нет никого из них (фактически на заднем плане стена и телевизор сильно боком);
        3. снимки которые не удалось распознать нужно сохранять в специальную папку, для последующего обучения.

Я думаю возможны следующие затруднения - различное освещение (стол стоит боком к окну), телевизор на заднем плане.

Требования к отчетам
********************
Предполагаю отчеты в виде линейного графика - 4 линии, по оси x - дата/время, по y кол-во проведенных минут (или часов, как пойдет). Следующие графики:
        1. За один день (задается)
        2. За произвольный период (задается).

Отчет за вчерашний день, неделю и месяц должен отправляться по email.

Распознование
-------------

Подготовка изображений для обучения сети
****************************************
Как я понял для работы сети необходимо подготовить большое кол-во изображений, разложенных по папкам в соответствии с объектами которые на них присутствуют.

Для этого я решил использовать видеокамеру ноута и простой скрипт на python, чтобы делать снимки раз в минуту. Далее эти снимки я вручную разложу по 4-м папкам.

Скрипт на python:: 

    import cv2
    import datetime
    # Включаем первую камеру
    cap = cv2.VideoCapture(0)
    # "Прогреваем" камеру, чтобы снимок не был тёмным
    for i in range(30):
        cap.read()
    # Делаем снимок
    ret, frame = cap.read()
    # Записываем в файл
    cv2.imwrite('/home/alexey/cam/' + datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S.jpg'), frame)
    # Отключаем камеру
    cap.release()

Запускается скрипт задание в cron::

      */1 * * * * python3 /home/alexey/get_cam.py

В результате работы скрипт в папке ``/home/alexey/cam`` собираются снимки с камеры. Предполагаю оставить скрипт в работе на 2-3 дня, а потом вручную рассортировать снимки.



